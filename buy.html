<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AeroPhone II Konfigurator</title>

<style>
@font-face {
  font-family: 'Aeropus UI II';
  src: url('dasfohlen1900.github.io/mini-word/assets/fonts/AeropusUIII-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
}

body {
  font-family: 'Aeropus UI II', Arial, sans-serif;
  background: #f4f4f4;
  color: #222;
  margin: 0;
}

/* Store Header */
.store-header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: #111;
  color: #fff;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 30px;
}

.logo {
  color: #fff;
  text-decoration: none;
  font-size: 1.4em;
  font-weight: bold;
}

.cart {
  color: #fff;
  font-size: 1.4em;
  text-decoration: none;
}

/* Page Header */
.page-header {
  background: #111;
  color: #fff;
  padding: 20px;
  text-align: center;
}

.container {
  max-width: 800px;
  margin: 30px auto;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}

label {
  display: block;
  margin: 10px 0 5px;
  font-weight: bold;
}

select,
input[type="checkbox"] {
  width: 100%;
  padding: 8px;
  font-size: 1em;
  margin-bottom: 15px;
}

.color-swatch {
  display: inline-block;
  width: 25px;
  height: 25px;
  border-radius: 50%;
  border: 2px solid #000;
  margin-right: 6px;
  cursor: pointer;
}

.color-swatch.selected {
  border: 3px solid #007bff;
}

#price {
  font-size: 1.5em;
  font-weight: bold;
  margin-top: 20px;
  text-align: center;
}

button {
  width: 100%;
  padding: 15px;
  margin-top: 20px;
  font-size: 1.1em;
  background: #111;
  color: #fff;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

button:hover {
  opacity: 0.85;
}
</style>
</head>

<body>

<header class="store-header">
  <a href="index.html" class="logo">Aeropus</a>

  <a href="cart.html" class="cart">
    üõí
    <span id="cartBadge" style="
      display:inline-block;
      background:#c00;
      color:#fff;
      font-size:0.7em;
      width:18px;
      height:18px;
      line-height:18px;
      text-align:center;
      border-radius:50%;
      vertical-align:top;
      margin-left:5px;
      transition: transform 0.2s ease;
    ">0</span>
  </a>
</header>


<div class="page-header">
  <h1>AeroPhone II Konfigurator</h1>
  <p>W√§hle Modell, Speicher, Farbe und Zubeh√∂r</p>
</div>

<div class="container">

<label for="model">Modell</label>
<select id="model">
  <option value="II">AeroPhone II</option>
  <option value="Pro">AeroPhone II Pro</option>
  <option value="Premium">AeroPhone II Premium</option>
  <option value="IIa">AeroPhone IIa</option>
  <option value="IIaMini">AeroPhone IIa Mini</option>
</select>

<label for="storage">Speicher</label>
<select id="storage"></select>

<label>Farbe</label>
<div id="colors"></div>

<label>Zubeh√∂r</label>
<div id="accessories">
  <label><input type="checkbox" value="50"> Schutzh√ºlle (+50 VIL)</label>
  <label><input type="checkbox" value="30"> Displayschutz (+30 VIL)</label>
  <label><input type="checkbox" value="100"> Earbuds (+100 VIL)</label>
  <label><input type="checkbox" value="60"> Ladeger√§t (+60 VIL)</label>
  <label><input type="checkbox" value="150"> Powerbank (+150 VIL)</label>
  <label><input type="checkbox" value="80"> Stylus (+80 VIL)</label>
</div>

<div id="price"></div>

<button onclick="addToCart()">In den Warenkorb</button>

</div>

<script>
const data = {
  II: {
    storage: ["128 GB", "256 GB", "512 GB"],
    colors: ["#000","orange","#e5e5e5","#00bfa5","#ff007f","#ffff00"],
    pricesVIL: [899, 999, 1099]
  },
  Pro: {
    storage: ["256 GB", "512 GB", "1 TB"],
    colors: ["#444","#a0d8ef","#00ff88"],
    pricesVIL: [1099, 1199, 1649]
  },
  Premium: {
    storage: ["256 GB", "512 GB", "1 TB", "2 TB"],
    colors: ["#111","#c0c0c0","#009966"],
    pricesVIL: [1449, 1899, 1999, 2499]
  },
  IIa: {
    storage: ["128 GB", "256 GB", "512 GB"],
    colors: ["#111","#c0c0c0","#009966"],
    pricesVIL: [499, 699, 899]
  },
  IIaMini: {
    storage: ["128 GB", "256 GB", "512 GB"],
    colors: ["#111","#c0c0c0","#009966"],
    pricesVIL: [469, 669, 869]
  }

};

const vilToEuro = vil => (vil * 0.75).toFixed(2) + " ‚Ç¨";

const modelSelect = document.getElementById("model");
const storageSelect = document.getElementById("storage");
const colorsDiv = document.getElementById("colors");
const accessories = document.querySelectorAll("#accessories input");
const priceDiv = document.getElementById("price");

let selectedColorIndex = 0;

function updateStorage() {
  storageSelect.innerHTML = "";
  data[modelSelect.value].storage.forEach((s, i) => {
    const opt = document.createElement("option");
    opt.value = i;
    opt.textContent = s;
    storageSelect.appendChild(opt);
  });
  selectedColorIndex = 0;
  updateColors();
  updatePrice();
}

function updateColors() {
  colorsDiv.innerHTML = "";
  data[modelSelect.value].colors.forEach((c, i) => {
    const sw = document.createElement("div");
    sw.className = "color-swatch" + (i === selectedColorIndex ? " selected" : "");
    sw.style.background = c;
    sw.onclick = () => {
      selectedColorIndex = i;
      updateColors();
      updatePrice();
    };
    colorsDiv.appendChild(sw);
  });
}

function updatePrice() {
  let vil = data[modelSelect.value].pricesVIL[storageSelect.value];
  accessories.forEach(a => {
    if (a.checked) vil += parseInt(a.value);
  });
  priceDiv.textContent = `Preis: ${vil} VIL (${vilToEuro(vil)})`;
}
function updateCartBadge(animated = true) {
  const cart = JSON.parse(localStorage.getItem("aeropusCart")) || [];
  const badge = document.getElementById("cartBadge");
  badge.textContent = cart.length;

  if(animated && cart.length > 0) {
    badge.style.transform = "scale(1.5)";
    setTimeout(() => {
      badge.style.transform = "scale(1)";
    }, 200);
  }
}

// initial aufrufen
updateCartBadge(); // Badge animiert aktualisieren anstatt ohne Animation beim Laden

function addToCart() {
  let priceVIL = data[modelSelect.value].pricesVIL[storageSelect.value];
  accessories.forEach(a => {
    if (a.checked) priceVIL += parseInt(a.value);
  });

  const item = {
    model: modelSelect.value,
    storage: data[modelSelect.value].storage[storageSelect.value],
    color: data[modelSelect.value].colors[selectedColorIndex],
    accessories: [...accessories].filter(a => a.checked).map(a => a.parentElement.innerText.trim()),
    priceVIL,
    priceText: `Preis: ${priceVIL} VIL (${vilToEuro(priceVIL)})`
  };

  const cart = JSON.parse(localStorage.getItem("aeropusCart")) || [];
  cart.push(item);
  localStorage.setItem("aeropusCart", JSON.stringify(cart));

  window.location.href = "cart.html";
}

modelSelect.onchange = updateStorage;
storageSelect.onchange = updatePrice;
accessories.forEach(a => a.onchange = updatePrice);

updateStorage();
</script>

</body>
</html>
